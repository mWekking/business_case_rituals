version: 2

models:
  - name: int_github_pull_requests
    description: >-
      Staging table for GitHub Pull Requests. Grain: 1 row per PR (repo_owner, repo_name, pr_id).
    columns:
      - name: repo_owner
        description: Repository owner
        tests:
          - not_null

      - name: repo_name
        description: Repository name
        tests:
          - not_null

      - name: pr_id
        description: GitHub PR id (stable primary key)
        tests:
          - not_null
          - unique

      - name: pr_number
        description: PR number shown in GitHub UI (not globally unique)

      - name: pr_state
        description: PR state from GitHub (open or closed)

      - name: is_draft
        description: Whether the PR is marked as draft

      - name: title
        description: PR title

      - name: author_login
        description: GitHub login of the PR author

      - name: author_type
        description: GitHub user type of the PR author (User, Bot, Organization)

      - name: created_at
        description: Timestamp when the PR was created

      - name: updated_at
        description: Timestamp when the PR was last updated

      - name: closed_at
        description: Timestamp when the PR was closed

      - name: merged_at
        description: Timestamp when the PR was merged

      - name: comments_count
        description: Number of issue comments on the PR

      - name: review_comments_count
        description: Number of review comments on the PR

      - name: commits_count
        description: Number of commits in the PR

      - name: additions
        description: Lines added in the PR

      - name: deletions
        description: Lines deleted in the PR

      - name: changed_files
        description: Number of files changed in the PR
      
      - name: requested_reviewers_count
        description: Number of requested reviewers on the pull request

      - name: source_updated_at
        description: Source update timestamp captured during extraction

      - name: _extracted_at
        description: Timestamp when the record was extracted

      - name: raw_json
        description: Full raw GitHub payload for the PR

      - name: body_length
        description: The lenght of the body of the PR

      - name: labels_used
        description: The number of labels attached to the PR

      - name: requested_reviewers
        description: The number of reviewers requested

      - name: emojis_used
        description: The number of emojis used in a PR


